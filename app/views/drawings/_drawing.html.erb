<div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition duration-200"
     data-drawings-reorder-target="item"
     data-drawing-id="<%= drawing.id %>"
     data-position="<%= drawing.position %>">
  <div class="flex items-center space-x-4">
    <!-- Drag Handle -->
    <div class="cursor-move text-gray-400 hover:text-gray-600" data-drawings-reorder-target="handle">
      <%= icon "grip-vertical", class: "w-6 h-6" %>
    </div>

    <!-- Position Badge -->
    <div class="flex-shrink-0">
      <span class="inline-flex items-center justify-center w-10 h-10 bg-purple-100 text-purple-700 rounded-full font-semibold">
        <%= drawing.position + 1 %>
      </span>
    </div>

    <!-- Image Thumbnail -->
    <div class="flex-shrink-0">
      <div class="w-24 h-24 bg-gray-100 rounded overflow-hidden">
        <%= image_tag drawing.image.variant(:thumb), class: "w-full h-full object-cover" if drawing.image.attached? %>
      </div>
    </div>

    <!-- Drawing Info -->
    <div class="flex-1 min-w-0">
      <% if drawing.caption.present? %>
        <p class="text-sm font-medium text-gray-900 truncate"><%= drawing.caption %></p>
      <% else %>
        <p class="text-sm text-gray-500">No caption</p>
      <% end %>

      <div class="flex items-center mt-1 space-x-2">
        <% if drawing.tag.present? %>
          <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
            <%= icon "tag", class: "w-3 h-3 mr-1" %>
            <%= drawing.tag %>
          </span>
        <% end %>

        <% if drawing.image.attached? %>
          <span class="text-xs text-gray-500">
            <%= number_to_human_size(drawing.image.blob.byte_size) %>
          </span>
        <% end %>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex-shrink-0 flex space-x-2">
      <%= link_to edit_child_profile_book_drawing_path(child_profile, book, drawing),
          class: "inline-flex items-center px-3 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition duration-200" do %>
        <%= icon "pencil", class: "w-4 h-4" %>
      <% end %>

      <%= button_to child_profile_book_drawing_path(child_profile, book, drawing),
          method: :delete,
          data: { turbo_confirm: "Are you sure you want to delete this drawing?" },
          class: "inline-flex items-center px-3 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 bg-white hover:bg-red-50 transition duration-200" do %>
        <%= icon "trash-2", class: "w-4 h-4" %>
      <% end %>
    </div>
  </div>
</div>
